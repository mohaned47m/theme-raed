{#
| Variable         | Type    | Description                     |
|------------------|---------|---------------------------------|
| cart             | object  |                                 |
| cart.items_count | int     |                                 |
| cart.total       | string  | Formatted total ex: "١٠٠ ر.س"   |
#}

{# ===== Top Bar - الشريط العلوي ===== #}
<div class="top-bar-custom">
    <div class="container flex justify-between items-center">
        <div class="flex items-center gap-6">
            {# Language #}
            {% if store.settings.is_multilingual or store.settings.currencies_enabled %}
                <button type="button" onclick="salla.event.dispatch('localization::open')" class="top-bar-link">
                    <i class="sicon-globe text-sm"></i>
                    <span>اللغة: {{ user.language.name }}</span>
                </button>
                <salla-localization-modal></salla-localization-modal>
            {% endif %}
            
            {# Track Order #}
            <a href="/orders" class="top-bar-link">
                <i class="sicon-shipping-fast text-sm"></i>
                <span>تتبع طلبك</span>
            </a>
        </div>
        
        <div class="hidden md:flex items-center gap-4">
            <span class="text-amber-600">خبرة أكثر من 10 سنوات</span>
            <span class="h-3 w-px bg-white/20"></span>
            <span>معدات احترافية موثوقة</span>
        </div>
    </div>
</div>

{# ===== Main Header - الهيدر الرئيسي ===== #}
<header class="main-header-custom">
    <div class="container">
        <div class="flex items-center justify-between gap-8 py-4">
            
            {# === Logo === #}
            <div class="flex items-center gap-3">
                <a href="{{ store.url }}" class="flex items-center gap-3">
                    <img src="{{ store.logo|cdn(175) }}" alt="{{ store.name }}" class="h-10 w-auto">
                    <div class="hidden sm:flex flex-col">
                        <span class="text-xl font-black text-white leading-none">{{ store.name }}</span>
                        <span class="text-[10px] uppercase tracking-widest text-amber-600 font-bold">
                            {{ store.description|slice(0, 20) ?? 'الهوية الأصلية' }}
                        </span>
                    </div>
                </a>
                {% if is_page('index') %}
                    <h1 class="sr-only">{{ store.name }}</h1>
                {% else %}
                    <h2 class="sr-only">{{ store.name }}</h2>
                {% endif %}
            </div>

            {# === Search === #}
            <div class="flex-1 max-w-2xl hidden lg:block">
                <salla-search class="header-search-custom"></salla-search>
            </div>

            {# === Actions === #}
            <div class="flex items-center gap-3">
                {# Mobile Menu #}
                <a class="lg:hidden header-action-btn" href="#mobile-menu" aria-label="Open-menu">
                    <i class="sicon-menu text-xl"></i>
                </a>

                {# Mobile Search #}
                <button class="lg:hidden header-action-btn" onclick="salla.event.dispatch('search::open')">
                    <i class="sicon-search text-xl"></i>
                </button>

                {# User Account #}
                {% if user.type == 'user' %}
                    <salla-user-menu avatar-only show-header></salla-user-menu>
                {% else %}
                    <button class="header-action-btn hidden sm:flex" onclick="salla.event.dispatch('login::open')" aria-label="Login">
                        <i class="sicon-user-circle text-xl"></i>
                    </button>
                {% endif %}

                {# Wishlist #}
                <a href="/wishlist" class="header-action-btn hidden sm:flex" aria-label="Wishlist">
                    <i class="sicon-heart text-xl"></i>
                </a>

                {# Cart #}
                <salla-cart-summary class="cart-btn-custom">
                    <i slot="icon" class="sicon-shopping-bag text-xl"></i>
                </salla-cart-summary>
            </div>
        </div>
    </div>
    
    {# === Categories Menu === #}
    <div class="hidden lg:block border-t border-white/10">
        <div class="container">
            <custom-main-menu></custom-main-menu>
        </div>
    </div>
</header>

<style>
/* Top Bar */
.top-bar-custom {
    background-color: #1e1a18;
    padding: 0.5rem 0;
    font-size: 0.75rem;
    color: #94a3b8;
    border-bottom: 1px solid rgba(255,255,255,0.05);
}

.top-bar-link {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    transition: color 0.3s;
}

.top-bar-link:hover {
    color: white;
}

/* Main Header */
.main-header-custom {
    background-color: #2F2824 !important;
    position: sticky;
    top: 0;
    z-index: 50;
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
}

/* Action Buttons */
.header-action-btn {
    padding: 0.625rem;
    background-color: rgba(255,255,255,0.05);
    border-radius: 0.5rem;
    color: white;
    transition: all 0.3s;
}

.header-action-btn:hover {
    background-color: rgba(255,255,255,0.1);
}

/* Cart Button */
.cart-btn-custom {
    background-color: #87602C !important;
    color: white !important;
    padding: 0.625rem;
    border-radius: 0.5rem;
}

.cart-btn-custom:hover {
    filter: brightness(1.1);
}

/* Hide default header styles */
.store-header, .top-navbar, .main-nav-container {
    display: none !important;
}
</style>
