{# ############## Shared Variables in all views ################ #}
<!DOCTYPE html>
<html lang="{{ user.language.code }}" dir="{{ user.language.dir }}">
<!-- بسم الله الرحمن الرحيم -->
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {{ theme.settings.set('placeholder', 'images/placeholder.png') }}

    <script defer data-cfasync="false" crossorigin="anonymous" src="{{ 'product-card.js'|asset }}"></script>
    <script defer src="{{ 'main-menu.js'|asset }}"></script>
    {% if theme.settings.get('enable_add_product_toast', true) %}
        <script defer src="{{ 'add-product-toast.js'|asset }}"></script>
    {% endif %}

    {% block head_scripts %}{% endblock %}

    <script data-cfasync="false">
        window.header_is_sticky = "{{theme.settings.get('header_is_sticky', 'Default Value')}}"
        window.imageZoom = "{{theme.settings.get('imageZoom')}}"
        window.can_access_wallet = {{ user.can_access_wallet | json_encode }}
        window.enable_more_menu = "{{ theme.settings.get('enable_more_menu', true) }}"
        window.enable_add_product_toast = "{{ theme.settings.get('enable_add_product_toast', true) }}"
    </script>
    
    {% hook 'head:start' %}
    {% hook head %}
    {% block styles %}{% endblock %}
    <link rel="stylesheet" href="{{ 'app.css' | asset }}">
    <link rel="stylesheet" href="{{ 'styles/custom-theme.css' | asset }}">
    <link rel="stylesheet" href="{{ theme.font.path|cdn }}"/>
    <link rel="stylesheet" href="{{ 'fonts/sallaicons.css'|cdn }}"/>
    
    <style>
        /* ===== ثيم ذروة - Custom Theme ===== */
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700;800;900&display=swap');
        
        :root {
            --font-main: 'Cairo', sans-serif;
            --color-primary: {{ theme.color.primary }};
            --color-primary-dark: {{ theme.color.darker(0.2) }};
            --color-primary-light: {{ theme.color.lighter(0.2) }};
            --header-text-color: {{ theme.settings.get('header_text_color', '#FFFFFF') }};
            --footer-text-color: {{ theme.settings.get('footer_text_color', '#FFFFFF') }};
        }
        
        body, * {
            font-family: 'Cairo', sans-serif !important;
        }
        
        body {
            background-color: #FFFFFF !important;
        }
        
        /* ===== Header - الخلفية من لون الهوية ===== */
        .store-header,
        #mainnav,
        .main-nav-container,
        .main-nav-container .inner {
            background-color: var(--color-primary) !important;
        }
        
        /* Header Text - لون النص من الإعدادات */
        custom-main-menu a,
        custom-main-menu span,
        .main-nav-container a,
        .main-nav-container span,
        .navbar-brand span,
        .store-header a,
        .store-header span,
        .store-header i,
        #mainnav a,
        #mainnav span,
        #mainnav i,
        .header-btn,
        .header-btn i,
        salla-cart-summary,
        salla-cart-summary i,
        salla-cart-summary span {
            color: var(--header-text-color) !important;
        }
        
        /* Dropdown */
        .s-menu-dropdown,
        .dropdown-menu {
            background-color: var(--color-primary) !important;
        }
        
        .s-menu-dropdown a,
        .dropdown-menu a {
            color: var(--header-text-color) !important;
        }
        
        .s-menu-dropdown a:hover,
        .dropdown-menu a:hover {
            background-color: var(--color-primary-dark) !important;
        }
        
        /* ===== Footer - الخلفية من لون الهوية ===== */
        footer, .footer {
            background-color: var(--color-primary) !important;
        }
        
        /* Footer Text - لون النص من الإعدادات */
        footer *, 
        .footer *,
        footer a, 
        .footer a,
        footer p, 
        .footer p,
        footer span, 
        .footer span,
        footer i,
        .footer i,
        footer h1, footer h2, footer h3, footer h4, footer h5, footer h6,
        .footer h1, .footer h2, .footer h3, .footer h4, .footer h5, .footer h6 {
            color: var(--footer-text-color) !important;
        }
        
        footer a:hover, .footer a:hover {
            opacity: 0.7;
        }
        
        /* ===== Buttons ===== */
        .s-button-primary, 
        .btn--primary {
            background-color: var(--color-primary) !important;
            border-color: var(--color-primary) !important;
        }
        
        /* Top Bar */
        .top-navbar {
            display: none !important;
        }
        
        /* Cart Button */
        salla-cart-summary {
            background-color: var(--color-primary-dark) !important;
            border-radius: 8px;
            padding: 8px;
        }
    </style>
    {# tracking services, custom css feature. #}
    {% hook 'head:end' %}
</head>
<body id="app" class="theme-raed overflow-x-hidden {% hook 'body:classes' %}
  {{ theme.settings.get('footer_is_dark') ? ' footer-is-dark' : ' footer-is-light' }}
  {{ theme.settings.get('topnav_is_dark') ? ' topnav-is-dark' : '' }}
  {{ theme.settings.get('sticky_add_to_cart') ? ' is-sticky-product-bar' : '' }}
  ">
<noscript>
    To get full functionality of this site you need to enable JavaScript. Here is how
    <a href="https://www.enable-javascript.com/" rel="noreferrer"
       target="_blank">To enable JavaScript on webpage</a>.
</noscript>
<div class="app-inner flex flex-col min-h-full">
    {% hook 'body:start' %}
    {% component 'header.header' %}
    <main id="main-content" role="main">
    {% block content %}{% endblock %}
    </main>
    {% component 'footer.footer' %}
</div>
{% hook 'body:end' %}
{% if theme.settings.get('enable_add_product_toast', true) %}
    <salla-add-product-toast></salla-add-product-toast>
{% endif %}
<script defer crossorigin="anonymous" src="{{ 'app.js' | asset }}"></script>

{# Twilight Components #}
<salla-offer-modal></salla-offer-modal>
<salla-search></salla-search>

{% if user.type=='guest' %}
    <salla-login-modal></salla-login-modal>
{% endif %}
{% if store.scope %}
    <salla-scopes selection="{{ store.scope.display_as == 'popup' ? 'mandatory' : 'optional' }}"></salla-scopes>
{% endif %}

{# CRO Features #}
{% include 'components.cro-features' ignore missing %}

{% block scripts %}{% endblock %}
</body>
</html>
