{# ===== ذروة - الأسئلة الشائعة ===== #}
<section class="therwa-faq py-12">
    <div class="container">
        {# Section Header #}
        <div class="text-center mb-10">
            <h2 class="text-2xl md:text-3xl font-bold mb-3" style="color: {{ theme.color.primary }};">
                {{ component.title|default('الأسئلة الشائعة') }}
            </h2>
            <p class="text-gray-500 max-w-2xl mx-auto">
                {{ component.subtitle|default('إجابات لأكثر الأسئلة شيوعاً من عملائنا الكرام') }}
            </p>
        </div>
        
        {# FAQ Accordion #}
        <div class="max-w-3xl mx-auto space-y-4">
            {% for faq in component.faqs %}
            <div class="faq-item bg-white rounded-xl overflow-hidden shadow-sm" style="border: 1px solid {{ theme.color.lighter(0.9) }};">
                <button class="faq-toggle w-full flex items-center justify-between p-5 text-right font-semibold transition-colors hover:bg-gray-50" onclick="toggleFaq(this)">
                    <span style="color: {{ theme.color.primary }};">{{ faq.question }}</span>
                    <i class="sicon-keyboard-arrow-down text-xl transition-transform" style="color: {{ theme.color.primary }};"></i>
                </button>
                <div class="faq-content hidden px-5 pb-5">
                    <p class="text-gray-600 leading-relaxed">{{ faq.answer }}</p>
                </div>
            </div>
            {% else %}
            {# Default FAQs #}
            {% set default_faqs = [
                {'question': 'ما هي طرق الدفع المتاحة؟', 'answer': 'نوفر عدة طرق للدفع تشمل: بطاقات الائتمان (فيزا/ماستركارد)، مدى، Apple Pay، تحويل بنكي، والدفع عند الاستلام في بعض المناطق.'},
                {'question': 'كم تستغرق عملية التوصيل؟', 'answer': 'يتم التوصيل خلال 2-5 أيام عمل للمدن الرئيسية، و5-7 أيام عمل للمناطق الأخرى. يمكنك تتبع طلبك من خلال رقم التتبع المرسل إليك.'},
                {'question': 'هل يمكنني استرجاع المنتج؟', 'answer': 'نعم، نوفر سياسة استرجاع مرنة خلال 14 يوم من استلام الطلب بشرط أن يكون المنتج بحالته الأصلية وبتغليفه الكامل.'},
                {'question': 'هل المنتجات أصلية ومضمونة؟', 'answer': 'جميع منتجاتنا أصلية 100% ومستوردة من المصادر الرسمية، ونقدم ضمان على جميع المنتجات حسب نوع المنتج.'},
                {'question': 'كيف يمكنني التواصل مع خدمة العملاء؟', 'answer': 'يمكنك التواصل معنا عبر الواتساب، البريد الإلكتروني، أو الاتصال المباشر. فريق الدعم متاح للرد على استفساراتكم.'}
            ] %}
            {% for faq in default_faqs %}
            <div class="faq-item bg-white rounded-xl overflow-hidden shadow-sm" style="border: 1px solid {{ theme.color.lighter(0.9) }};">
                <button class="faq-toggle w-full flex items-center justify-between p-5 text-right font-semibold transition-colors hover:bg-gray-50" onclick="toggleFaq(this)">
                    <span style="color: {{ theme.color.primary }};">{{ faq.question }}</span>
                    <i class="sicon-keyboard-arrow-down text-xl transition-transform" style="color: {{ theme.color.primary }};"></i>
                </button>
                <div class="faq-content hidden px-5 pb-5">
                    <p class="text-gray-600 leading-relaxed">{{ faq.answer }}</p>
                </div>
            </div>
            {% endfor %}
            {% endfor %}
        </div>
        
        {# Contact CTA #}
        <div class="text-center mt-10">
            <p class="text-gray-500 mb-4">لم تجد إجابة لسؤالك؟</p>
            <a href="/contact" class="inline-flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-all hover:scale-105" style="background-color: {{ theme.color.primary }}; color: {{ theme.color.reverse_text }};">
                <i class="sicon-headphones"></i>
                تواصل معنا
            </a>
        </div>
    </div>
</section>

<script>
function toggleFaq(button) {
    var content = button.nextElementSibling;
    var icon = button.querySelector('i');
    var isOpen = !content.classList.contains('hidden');
    
    // Close all other FAQs
    document.querySelectorAll('.faq-content').forEach(function(el) {
        el.classList.add('hidden');
    });
    document.querySelectorAll('.faq-toggle i').forEach(function(el) {
        el.style.transform = 'rotate(0deg)';
    });
    
    // Toggle current FAQ
    if (!isOpen) {
        content.classList.remove('hidden');
        icon.style.transform = 'rotate(180deg)';
    }
}
</script>
