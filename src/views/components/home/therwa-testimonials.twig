{# ===== ذروة - آراء العملاء ===== #}
<section class="therwa-testimonials py-12" style="background-color: {{ theme.color.lighter(0.97) }};">
    <div class="container">
        {# Section Header #}
        <div class="text-center mb-10">
            <span class="inline-block px-4 py-2 rounded-full text-sm font-medium mb-4" style="background-color: {{ theme.color.primary }}; color: {{ theme.color.reverse_text }};">
                آراء العملاء
            </span>
            <h2 class="text-2xl md:text-3xl font-bold mb-3" style="color: {{ theme.color.primary }};">
                {{ component.title|default('تجارب المجتمع') }}
            </h2>
            <p class="text-gray-500 max-w-2xl mx-auto">
                {{ component.subtitle|default('اكتشف آراء عملائنا الكرام في منتجاتنا وخدماتنا') }}
            </p>
        </div>
        
        {# Testimonials Slider #}
        <div class="swiper testimonials-swiper">
            <div class="swiper-wrapper pb-12">
                {% for testimonial in testimonials|slice(0, 6) %}
                <div class="swiper-slide h-auto">
                    <div class="testimonial-card bg-white rounded-2xl p-6 shadow-sm h-full flex flex-col" style="border: 1px solid {{ theme.color.lighter(0.9) }};">
                        {# Quote Icon #}
                        <div class="text-4xl mb-4" style="color: {{ theme.color.lighter(0.7) }};">❝</div>
                        
                        {# Rating #}
                        <div class="flex items-center gap-1 mb-4">
                            {% for i in 1..5 %}
                            <i class="sicon-star text-yellow-400"></i>
                            {% endfor %}
                        </div>
                        
                        {# Content #}
                        <p class="text-gray-600 leading-relaxed mb-6 flex-grow">
                            {{ testimonial.content|default('تجربة رائعة! المنتجات عالية الجودة والتوصيل سريع جداً. أنصح الجميع بالتعامل مع هذا المتجر.') }}
                        </p>
                        
                        {# Author #}
                        <div class="flex items-center gap-3 pt-4" style="border-top: 1px solid {{ theme.color.lighter(0.9) }};">
                            <div class="w-12 h-12 rounded-full overflow-hidden" style="background-color: {{ theme.color.lighter(0.9) }};">
                                {% if testimonial.avatar %}
                                <img src="{{ testimonial.avatar }}" alt="{{ testimonial.name }}" class="w-full h-full object-cover">
                                {% else %}
                                <div class="w-full h-full flex items-center justify-center" style="background-color: {{ theme.color.primary }};">
                                    <i class="sicon-user text-lg" style="color: {{ theme.color.reverse_text }};"></i>
                                </div>
                                {% endif %}
                            </div>
                            <div>
                                <h4 class="font-bold text-gray-800">{{ testimonial.name|default('عميل سعيد') }}</h4>
                                <span class="text-sm text-gray-500">{{ testimonial.date|default('عميل موثق') }}</span>
                            </div>
                        </div>
                    </div>
                </div>
                {% else %}
                {# Default testimonials #}
                {% set default_testimonials = [
                    {'name': 'محمد العلي', 'content': 'تجربة تسوق ممتازة! جودة المنتجات رائعة والتوصيل كان سريع جداً. شكراً لكم'},
                    {'name': 'سارة الأحمد', 'content': 'أفضل متجر تعاملت معه، خدمة عملاء متميزة ومنتجات أصلية 100%'},
                    {'name': 'خالد الشمري', 'content': 'سرعة في التوصيل وتغليف احترافي. المنتج مطابق للوصف تماماً'}
                ] %}
                {% for testimonial in default_testimonials %}
                <div class="swiper-slide h-auto">
                    <div class="testimonial-card bg-white rounded-2xl p-6 shadow-sm h-full flex flex-col" style="border: 1px solid {{ theme.color.lighter(0.9) }};">
                        <div class="text-4xl mb-4" style="color: {{ theme.color.lighter(0.7) }};">❝</div>
                        <div class="flex items-center gap-1 mb-4">
                            {% for i in 1..5 %}<i class="sicon-star text-yellow-400"></i>{% endfor %}
                        </div>
                        <p class="text-gray-600 leading-relaxed mb-6 flex-grow">{{ testimonial.content }}</p>
                        <div class="flex items-center gap-3 pt-4" style="border-top: 1px solid {{ theme.color.lighter(0.9) }};">
                            <div class="w-12 h-12 rounded-full flex items-center justify-center" style="background-color: {{ theme.color.primary }};">
                                <i class="sicon-user text-lg" style="color: {{ theme.color.reverse_text }};"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-gray-800">{{ testimonial.name }}</h4>
                                <span class="text-sm text-gray-500">عميل موثق</span>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
                {% endfor %}
            </div>
            
            {# Pagination #}
            <div class="swiper-pagination"></div>
        </div>
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
    if (typeof Swiper !== 'undefined') {
        new Swiper('.testimonials-swiper', {
            slidesPerView: 1,
            spaceBetween: 20,
            autoplay: { delay: 5000 },
            pagination: { el: '.testimonials-swiper .swiper-pagination', clickable: true },
            breakpoints: {
                640: { slidesPerView: 2 },
                1024: { slidesPerView: 3 }
            }
        });
    }
});
</script>
