{# ############## Shared Variables in all views ################ #}
<!DOCTYPE html>
<html lang="{{ user.language.code }}" dir="{{ user.language.dir }}">
<!-- بسم الله الرحمن الرحيم -->
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {{ theme.settings.set('placeholder', 'images/placeholder.png') }}

    <script defer data-cfasync="false" crossorigin="anonymous" src="{{ 'product-card.js'|asset }}"></script>
    <script defer src="{{ 'main-menu.js'|asset }}"></script>
    {% if theme.settings.get('enable_add_product_toast', true) %}
        <script defer src="{{ 'add-product-toast.js'|asset }}"></script>
    {% endif %}

    {% block head_scripts %}{% endblock %}

    <script data-cfasync="false">
        window.header_is_sticky = "{{theme.settings.get('header_is_sticky', 'Default Value')}}"
        window.imageZoom = "{{theme.settings.get('imageZoom')}}"
        window.can_access_wallet = {{ user.can_access_wallet | json_encode }}
        window.enable_more_menu = "{{ theme.settings.get('enable_more_menu', true) }}"
        window.enable_add_product_toast = "{{ theme.settings.get('enable_add_product_toast', true) }}"
    </script>
    
    {% hook 'head:start' %}
    {% hook head %}
    {% block styles %}{% endblock %}
    <link rel="stylesheet" href="{{ 'app.css' | asset }}">
    <link rel="stylesheet" href="{{ theme.font.path|cdn }}"/>
    <link rel="stylesheet" href="{{ 'fonts/sallaicons.css'|cdn }}"/>
    
    <style>
        /* ===== ثيم ذروة - Custom Theme ===== */
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700;800;900&display=swap');
        
        :root {
            --font-main: 'Cairo', sans-serif;
            --header-bg-color: {{ theme.settings.get('header_bg_color', '#2F2824') }};
            --header-text-color: {{ theme.settings.get('header_text_color', '#FFFFFF') }};
            --header-icon-color: {{ theme.settings.get('header_icon_color', '#FFFFFF') }};
            --header-icon-bg-color: {{ theme.settings.get('header_icon_bg_color', '#87602C') }};
            --footer-bg-color: {{ theme.settings.get('footer_bg_color', '#2F2824') }};
            --footer-text-color: {{ theme.settings.get('footer_text_color', '#FFFFFF') }};
        }
        
        body, * {
            font-family: 'Cairo', sans-serif !important;
        }
        
        body {
            background-color: #FFFFFF !important;
        }
        
        /* ===== Header Background ===== */
        .store-header,
        #mainnav,
        .main-nav-container,
        .main-nav-container .inner {
            background-color: var(--header-bg-color) !important;
        }
        
        /* ===== Header Text ===== */
        custom-main-menu a,
        custom-main-menu span,
        .main-nav-container a,
        .main-nav-container span,
        .navbar-brand span,
        .store-header a,
        .store-header span,
        #mainnav a,
        #mainnav span {
            color: var(--header-text-color) !important;
        }
        
        /* ===== Header Icons ===== */
        .store-header i,
        #mainnav i,
        .header-btn i,
        salla-cart-summary i {
            color: var(--header-icon-color) !important;
        }
        
        /* ===== Header Icon Background (Cart, User, etc) ===== */
        .header-btn,
        salla-cart-summary {
            background-color: var(--header-icon-bg-color) !important;
            border-radius: 8px;
            padding: 8px;
        }
        
        salla-cart-summary span {
            color: var(--header-icon-color) !important;
        }
        
        /* ===== Dropdown Menu ===== */
        .s-menu-dropdown,
        .dropdown-menu {
            background-color: var(--header-bg-color) !important;
        }
        
        .s-menu-dropdown a,
        .dropdown-menu a {
            color: var(--header-text-color) !important;
        }
        
        .s-menu-dropdown a:hover,
        .dropdown-menu a:hover {
            opacity: 0.8;
        }
        
        /* ===== Footer Background ===== */
        footer, .footer {
            background-color: var(--footer-bg-color) !important;
        }
        
        /* ===== Footer Text ===== */
        footer *, 
        .footer *,
        footer a, 
        .footer a,
        footer p, 
        .footer p,
        footer span, 
        .footer span,
        footer i,
        .footer i,
        footer h1, footer h2, footer h3, footer h4, footer h5, footer h6,
        .footer h1, .footer h2, .footer h3, .footer h4, .footer h5, .footer h6 {
            color: var(--footer-text-color) !important;
        }
        
        footer a:hover, .footer a:hover {
            opacity: 0.7;
        }
        
        /* ===== Buttons ===== */
        .s-button-primary, 
        .btn--primary {
            background-color: {{ theme.color.primary }} !important;
            border-color: {{ theme.color.primary }} !important;
        }
        
        /* Top Bar */
        .top-navbar {
            display: none !important;
        }
    </style>
    {% hook 'head:end' %}
</head>
<body id="app" class="theme-raed overflow-x-hidden {% hook 'body:classes' %}
  {{ theme.settings.get('footer_is_dark') ? ' footer-is-dark' : ' footer-is-light' }}
  {{ theme.settings.get('topnav_is_dark') ? ' topnav-is-dark' : '' }}
  {{ theme.settings.get('sticky_add_to_cart') ? ' is-sticky-product-bar' : '' }}
  ">
<noscript>
    To get full functionality of this site you need to enable JavaScript. Here is how
    <a href="https://www.enable-javascript.com/" rel="noreferrer"
       target="_blank">To enable JavaScript on webpage</a>.
</noscript>
<div class="app-inner flex flex-col min-h-full">
    {% hook 'body:start' %}
    {% component 'header.header' %}
    <main id="main-content" role="main">
    {% block content %}{% endblock %}
    </main>
    {% component 'footer.footer' %}
</div>
{% hook 'body:end' %}
{% if theme.settings.get('enable_add_product_toast', true) %}
    <salla-add-product-toast></salla-add-product-toast>
{% endif %}
<script defer crossorigin="anonymous" src="{{ 'app.js' | asset }}"></script>

{# Twilight Components #}
<salla-offer-modal></salla-offer-modal>
<salla-search></salla-search>

{% if user.type=='guest' %}
    <salla-login-modal></salla-login-modal>
{% endif %}
{% if store.scope %}
    <salla-scopes selection="{{ store.scope.display_as == 'popup' ? 'mandatory' : 'optional' }}"></salla-scopes>
{% endif %}

{% block scripts %}{% endblock %}
</body>
</html>
